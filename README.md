# 立创&涂鸦训练营第二期--物联网温湿度传感器
Tuya &amp; Lceda Camp Project, Iot Hygrothermograph

----------------------------------------------------------
##基于涂鸦智能的物联网温湿度计，自动采集当前温湿度数据，并通过STM32 & 涂鸦物联网模块上传至云端，送至APP端显示

This project is developed using Tuya SDK, which enables you to quickly develop branded apps connecting and controlling smart scenarios of many devices. For more information, please check Tuya Developer Website.

----------------------------------------------------
##一、实现功能
   1. 获取环境温湿度
   2. 通过OLED显示温湿度信息
   3. 将获取到的温湿度信息传输至APP
   4. 用按键设置配网方式
  ----------------------------------------------
##二、硬件
###1. MCU 
----------------------------------------
设计使用的是STM32F103C8T6。由于近期STM32价格离谱，改用了国产芯片APM32F103C8T6
###2. 供电
----------------------------------------
使用USB-Type-C插头，配合一个电源开关；
5V转3.3V，当然是万年不变的AMS1117-3.3。
###3. 联网模块 
----------------------------------------
涂鸦的WB3S模块，BLE&WIFI双模，配网操作很舒适。这次用的是MCU的SDK开发方式。
###4. 温湿度传感器 
---------------------------------------
SHT30-DIS，用的是IIC接口。第一次用这个，据说精度高，功耗低。
###5. 串口芯片 ：CH340N
----------------------------------------
用来debug，和Type-C口相连，感觉板载一个串口芯片比外接串口线看起来优雅一些。
###6. 显示 
--------------------------------------
IIC接口的0.96寸OLED屏。
###7. 按键
-------------------------------------
两个功能按键，KEY0用来配网，KEY1产测功能。

-------------------------------------
##三、软件
在学校放假前，我们有一个课程设计（课题已经在2020/11布置好了），好巧不巧也是设计一个物联网温湿度计（硬件不一样，温湿度计是DHT11，WiFi模块是ESP8266）。当时我是用了同学发的一个硬件初始化代码，在此基础上加入什么mqtt、esp8266、功能代码。
期末考试考完了才开始做，实际离验收不到6天，到验收前1晚，熬夜到3点多才勉强搞完，也只能算是半成品吧，只实现了设备通过MQTT协议向服务器发送温湿度数据，通过服务器点亮LED灯（万物从点灯开始）。
后来才知道，2个班实际做出来的没几组。
#####这次项目，硬件的初始化代码我也是基于同学发的代码（他的代码确实好，虽然他也是各种复制粘贴），加入了SHT30、涂鸦SDK代码开发出来的。
不得不说，要是之前知道有涂鸦这一平台，课程设计也不至于搞得要死要活的

--------------------------------
##四、展示
###1. PCB
我做了两块板子，第一块板子焊的实在是太差了，丑到我自己都看不下去了，就重新做了一块
![Alt text](./红板.jpg)
![Alt text](./黑板.jpg)

###2. 初始化
###3.配网
###4.温湿度显示

----------------------------------------
##总结
###1、感谢涂鸦智能以及立创EDA大力支持，学到了很多东西。有涂鸦智能，物联网难度真的下降一大截，这个假期收获满满。
###2、作为一个没事就画板子、每个月薅嘉立创羊毛成习惯的人来说，电路设计难度不大，但是要做的好才难，PCB布局合不合理、美不美观等。我觉得吧，这次PCB设计的功能不是很丰富，也只是完成最基本的功能而已。
###3、程序方面，涂鸦的SDK本身支持挺多功能的比如校时、天气等，但是对STM32学习的还是不够多，想要实现这些功能，但又不知从何下手，解决复杂问题的能力还是需要提高
###4、在群里能和大家一起讨论、学习非常开心！！！
-----------------------------------
####工程连接：https://oshwhub.com/Flight666/wu-lian-wang-wen-shi-du-ji
